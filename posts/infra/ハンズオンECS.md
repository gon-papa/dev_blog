---
id: d069f6d5-7be8-04e0-d7f8-0ab717449723
title: ECSをハンズオンで作成してみる
date: '2025-05-17'
tags:
  - AWS
  - ECS
  - コンテナオーケストレータ
  - ハンズオン
---
# ECSをハンズオンで作成してみる

今回はECS環境をハンズオンで作成していく。

## VPCとSubnetを作成する

VPCを10.0.0.0/20 (10,0.0.0~10.0.12.255)

Subnet-1 10.0.0.0/24(10.0.0.0~10.0.0.0.255)

Subnet-2 10.0.1.0/24(10.0.1.0~10.0.0.1.255)

の範囲で作成していく

リージョンはAsia/Tokyoとする(ap-northeast-1)

### Step1.AWSマネジメントコンソールからVPCを作成する

AWSマネジメントコンソールにログインし、VPCを検索して選択する。

初めての利用の場合はデフォルトのVPCが存在するため、削除する(放っておいても良い)

![VPCコンソール画面](images/aws_vpc_top.png)

右上からVPCの作成を選択して新規作成画面へ遷移する

作成するリソースは今回はVPCのみとする(VPCなどは関連するリソースも作成可能なため、こちらの方が楽ではある)

名前タグにはmy-vpcを入力

IPv4 CIDRブロックは手動入力。IPv4 CIDRに、10.0.0.0/20を入力

IPv6は今回不要

テナンシーはデフォルトとする

テナンシーはシングルテナント専用のハードウェアであり、ハードウェアを専有してしてVPCを構築することなる。よって、ハードウェアの利用料も支払い対象となる。セキュリティ的にハードウェアを他のユーザーと共有したくない場合やオンプレ向けなライセンスを持ち込みたい時などで使用する

![VPC作成画面](images/aws_vpc_create.png)

VPCが作成されたため、次はSubnetの作成を行なっていく

### Step.2 Subnetの作成

publicサブネットとprivateサブネットを作成していく

VPCダッシュボードのサブネットを選択する

VPCを削除していない場合はここにデフォルトのサブネットがあるが、別で作成していく。(デフォルトのVPCを削除していれば何もないはず。あっても更新すれば消えるか、再度削除してみればエラーになり、再更新すると消える)

まずはprivateサブネットを作成していく

サブネットの作成からVPC IDで先ほど、作成したVPCを選択

サブネット名にmy-subnet-app-private1-a

アベイラビリティゾーン(AZ)はap-northeast-1a

IPv4 VPC CIDRブロックは10.0.0.0/20

IPv4サブネット CIDRブロックは 10.0.0.0/24とする(サブネットはVPCに内包されるため、VPCのIPアドレスの範囲内のみ選択可能)

サブネットを作成を選択

![Subnet作成画面](images/aws_vpc_subnet_create.png)


次はpublicサブネットを作成していく

サブネットの作成からVPC IDで先ほど、作成したVPCを選択

サブネット名にmy-subnet-app-public1-a

アベイラビリティゾーン(AZ)はap-northeast-1a

IPv4 VPC CIDRブロックは10.0.0.0/20

IPv4サブネット CIDRブロックは 10.0.1.0/24とする(サブネットはVPCに内包されるため、VPCのIPアドレスの範囲内のみ選択可能)

サブネットを作成を選択


本来は、アベイラビリティーゾーンを変更して冗長性を考慮してサブネットを作成することが望ましい。(publicをAZ跨いで2つ作成。privateも然り。)

今回はpublicとprivateで役割の違うサブネットを1のAZで作成した。

これでサブネットの作成は完了である。

---
id: c601e3b4-ab16-f1ea-5b87-aa183efa83c0
title: AWS IAMについて学び直す
date: '2025-06-08'
tags:
  - AWS
  - IAM
---
# AWS IAMについて学び直す

AWSのIAMはユーザーにポリシーをアタッチして、グループにポリシーをアタッチして、ユーザーをグループに設定して、ロールにポリシーをアタッチして...etc
普段、やっているし意味も理解してるけど、ちゃんと学んどこうと思ったので改めてIAMについて記載していきます。

## IAMとは？

IAM(Identity Access Management)の名の通り、誰が(identity),アクセスするのか(access),管理する(management)するAWSサービスである。
要は、ユーザーやAWSリソースなどに対して細かく権限を設定して、認証・認可を行い安全に運用・構築を行うためのアクセス権限管理サービスだと思えば良い

認証- 相手は誰？
認可- リソースへのアクセス許可を行う

ざっくり理解したところで基本的な概念からおさらいしていく

## 基本概念

IAMは主に以下を理解しなければならない

* IAMポリシー
* IAMユーザー
* IAMグループ
* IAMロール

順番に説明していく。


### IAMポリシー

IAMにおける権限設定のルールとなる設定である。

Json形式で定義され(マネジメントコンソールならポチポチしながらJsonを生成することもできる)、

プリンシパル(主体)に対し、どのリソースへ、どのアクションを許可or拒否するのかを記述する。(AWSは基本、デフォルトは拒否である)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow", // 許可or拒否 = 許可(Allow)
      "Principal": {
        "AWS": "arn:aws:iam::123456789012:user/Hoge"  // 主体 = IAMユーザーのHogeさん
      },
      "Action": "s3:GetObject", // どのアクション = s3のオブジェクトの取得
      "Resource": "arn:aws:s3:::example-bucket/*" // どのリソース = S3バケット
    }
  ]
}
```

※ プリンシパルはアイデンティティベースポリシーでは省略される。(アタッチ先が明示的なため)

ポリシーもいくつか種類がある

* **アイデンティティポリシー**はIAMユーザー、IAMグループ、IAMロールなど、誰が何をするかの設定を行う
* **リソースベースポリシー**はS3やLambda関数など、誰に何を許すかの設定を行う
* **マネージドポリシー**はAWSが用意してくれているポリシー(ある程度の使用用途に対して定義済みポリシーが用意してある)

上記の場合はクロスアカウントアクセスを想定して、別アカウントのHogeさんにexample-bucket(S3)のオブジェクトを取得することを許しているポリシーとなっている

### IAMユーザー
AWSアカウント内で個別に作成されるユーザーIDである。各ユーザーはAWSマネジメントコンソール用のパスワードを持ち、必要に応じてAPI/CLI用のアクセスキーなどを発行できる。
IAMユーザーには直接ポリシーをアタッチして権限を付与する(アイデンティティポリシーやマネージドポリシー)